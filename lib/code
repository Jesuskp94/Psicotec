import 'package:flutter/material.dart';
import 'package:flutter_login_ui/utilities/router.dart';
import 'package:flutter_login_ui/utilities/shPreferences.dart';

void main(){
  // Add this here to initialize the routes
  FluroRouter.setupRouter();
  runApp(MyApp());
}

class MyApp extends StatefulWidget {
  @override
  _MyAppState createState() => _MyAppState();
}

class _MyAppState extends State<MyApp> {

  SharedPreferencesGlobal _preferences;
  String respuesta;

  @override
  void initState() {
    super.initState();
    _preferences = new SharedPreferencesGlobal();
  }

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
        title: 'Flutter Login UI',
        debugShowCheckedModeBanner: false,
        home: Scaffold(
          body: FutureBuilder<String>(
            future: _preferences.getUserLogged(),
            builder: (BuildContext context, AsyncSnapshot<String> snapshot)
            {
              if (!snapshot.hasData) {
                // while data is loading:
                return Center(
                  child: CircularProgressIndicator(),
                );
              } else {
                // data loaded:
                Navigator.
                respuesta = snapshot.data;
                return Center(
                  child: Text('Flutter Login'),
                );
              }
            },
          ),
        ),



        // Determinar a que ruta tomar dependiendo de si el usuario está loggeado o no
        initialRoute: respuesta,
        // Use the generator provided by Fluro package
        onGenerateRoute: FluroRouter.router.generator
    );
    throw UnimplementedError();
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_login_ui/utilities/router.dart';
import 'package:flutter_login_ui/utilities/shPreferences.dart';

void main(){
  // Add this here to initialize the routes
  FluroRouter.setupRouter();
  runApp(MyApp());
}

/*
class Prueba
{
  prueba2() async
  {
    print('comenzamos a comprobar las preferencias guardadas');


    print("valor de las preferencias" + _preferences);

    if (_preferences.indexOf('none')!=-1)
    {
      // en caso de estar guardadas las preferencias
      return 'home';
    }
    else
    {
      // en caso de estar no guardadas las preferencias
      return 'login';
    }
  }
}
*/

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
        title: 'Flutter Login UI',
        debugShowCheckedModeBanner: false,
        // Determinar a que ruta tomar dependiendo de si el usuario está loggeado o no
        initialRoute: 'login',
        // Use the generator provided by Fluro package
        onGenerateRoute: FluroRouter.router.generator
    );
    throw UnimplementedError();
  }
}